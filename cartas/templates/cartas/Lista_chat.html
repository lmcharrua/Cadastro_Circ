{% extends 'base.html' %}
{% load static %}

{% block content %}

<div class="container mx-auto">

  <!-- HTMX form -->
  <form id="cartas-form"
        hx-get="{% url 'lista_cartas' %}"
        hx-target="#tabela_cartas"
        hx-push-url="true">

    <!-- Global search -->
    <input
      type="text"
      name="search"
      placeholder="Search all columns..."
      value="{{ request.GET.search }}"
      class="border rounded p-2 w-full mb-3"
      hx-trigger="keyup changed delay:500ms"
    >

    <!-- Page size selector -->
    <div class="mb-3">
      <label>Rows per page:</label>
      <select
        name="per_page"
        class="border rounded p-1"
        hx-trigger="change"
      >
        {% for n in page_sizes %}
          <option value="{{ n }}" {% if per_page == n %}selected{% endif %}>{{ n }}</option>
        {% endfor %}
      </select>
    </div>

    <!-- Table container -->
    <div id="tabela_cartas" hx-trigger="load">
      {% include 'partials/_tabela_cartas.html' %}
    </div>

  </form>
</div>

<script src="{% static 'js/htmx.min.js' %}"></script>
{% endblock %}
