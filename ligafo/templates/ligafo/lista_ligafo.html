{% extends 'base.html' %}
{% load static %}
{% block content %}

{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

<form id="lfo-form"
        hx-post="{% url 'lista_ligafo' %}"
        hx-target="#list_lfo"
        hx-push-url="true">

    <!-- Nova tabela -->
    <div class=" p-4 flex justify-between">
        {% csrf_token %}
        <div>
        <span class=" items-center justify-center">
        <input type="text" name="search" value="{{ filter_query.search|default:'' }}" placeholder="Pesquisar..." class="text-xs items-center border justify-center border-gray-300 rounded-md p-2 w-1/3" hx-post="{% url 'lista_ligafo' %}" hx-target="#list_lfo" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" hx-include="#lfo-form">
        </span>
        </div>
        <div>
            <select name="per_page" class="text-xs border border-gray-300 rounded-md" 
                hx-post="{% url 'lista_ligafo' %}" 
                hx-target="#list_lfo" 
                hx-swap="innerHTML"
                hx-trigger="change"
                hx-indicator="#spinner"
                hx-include="#lfo-form">
                <option class="text-xs" value="10" {% if per_page == 10 %}selected{% endif %}>10 por página</option>
                <option class="text-xs" value="25" {% if per_page == 25 %}selected{% endif %}>25 por página</option>
                <option class="text-xs" value="50" {% if per_page == 50 %}selected{% endif %}>50 por página</option>
                <option class="text-xs" value="100" {% if per_page == 100 %}selected{% endif %}>100 por página</option>
            </select>
        </div>
    </div>
    
    <div class=" overflow-x-auto ">
        <div id="spinner" class="loader htmx-indicator mb-1">   </div>
            
        <table class="p-1" style="width: 100%;">
                <tr>
                    <td class="p-1">
                        <input type="text" name="referencia" value="{{ filter_query.referencia|default:'' }}" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Referência" hx-post="{% url 'lista_ligafo' %}" hx-target="#list_lfo" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" hx-include="#lfo-form" />
                    </td>
                    <td class="p-1">
                        <input type="text" name="cliente" value="{{ filter_query.cliente|default:'' }}" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Cliente" hx-post="{% url 'lista_ligafo' %}" hx-target="#list_lfo" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" hx-include="#lfo-form" />
                    </td>
                    <td class="p-1">
                        <input type="text" name="dist_optica" value="{{ filter_query.dist_optica|default:'' }}" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Distância Ótica" hx-post="{% url 'lista_ligafo' %}" hx-target="#list_lfo" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" hx-include="#lfo-form" />
                    </td>
                    <td class="p-1">
                        <input type="text" name="dist_iet" value="{{ filter_query.dist_iet|default:'' }}" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Distância IET" hx-post="{% url 'lista_ligafo' %}" hx-target="#list_lfo" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" hx-include="#lfo-form" />
                    </td>
                    <td class="p-1">
                        <input type="text" name="data_pedido" value="{{ filter_query.data_pedido|default:'' }}" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Data Pedido" hx-post="{% url 'lista_ligafo' %}" hx-target="#list_lfo" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" hx-include="#lfo-form" />
                    </td>
                    <td class="p-1">
                        <input type="text" name="data_entrega" value="{{ filter_query.data_entrega|default:'' }}" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Data Entrega" hx-post="{% url 'lista_ligafo' %}" hx-target="#list_lfo" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" hx-include="#lfo-form" />
                    </th>
                    <td class="p-1">
                        <input type="text" name="estado" value="{{ filter_query.estado|default:'' }}" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Estado" hx-post="{% url 'lista_ligafo' %}" hx-target="#list_lfo" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" hx-include="#lfo-form" />
                    </td>                   
                    <td class="p-1">
                        <input type="text" name="local_a" value="{{ filter_query.local_a|default:'' }}" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Local A" hx-post="{% url 'lista_ligafo' %}" hx-target="#list_lfo" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" hx-include="#lfo-form" />
                    </td>
                    <td class="p-1">
                        <input type="text" name="local_b" value="{{ filter_query.local_b|default:'' }}" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Local B" hx-post="{% url 'lista_ligafo' %}" hx-target="#list_lfo" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" hx-include="#lfo-form" />
                    </td>                  
                    <td class="p-1">
                        <input type="text" name="observacoes" value="{{ filter_query.observacoes|default:'' }}" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Observações" hx-post="{% url 'lista_ligafo' %}" hx-target="#list_lfo" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" hx-include="#lfo-form" />
                    </td>                      
                </tr>
            </table>
            
            {% include 'partials/tabela_lfo.html' %}
   
    </div>
    <div class="mt-3 flex justify-center space-x-2">
  
</div>

 




</form>

        

<script src="{% static 'js/jquery.min.js'%}"></script>






{% endblock %}