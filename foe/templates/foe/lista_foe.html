{% extends 'base.html' %}
{% load static %}
{% block content %}

{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}


<form id="foes-form"
        hx-post="{% url 'lista_foe' %}"
        hx-target="#lista_foes"
        hx-push-url="true">

    <!-- Nova tabela -->
    <div class=" p-4 flex justify-between">
        {% csrf_token %}
        <div>
        <span class=" items-center justify-center">
        <input type="text" name="search" placeholder="Pesquisar..." class="text-xs items-center border justify-center border-gray-300 rounded-md p-2 w-1/3" hx-post="{% url 'lista_foe' %}" hx-target="#lista_foes" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner">
        </span>
        </div>
        <div>
            <select name="per_page" class="text-xs border border-gray-300 rounded-md p-5" 
                hx-post="{% url 'lista_foe' %}" 
                hx-target="#lista_foes" 
                hx-swap="innerHTML"
                hx-trigger="change"
                hx-indicator="#spinner">
                <option class="text-xs" value="10" {% if request.GET.per_page == "10" %}selected{% endif %}>10 por página</option>
                <option class="text-xs" value="25" {% if request.GET.per_page == "25" %}selected{% endif %}>25 por página</option>
                <option class="text-xs" value="50" {% if request.GET.per_page == "50" %}selected{% endif %}>50 por página</option>
                <option class="text-xs" value="100" {% if request.GET.per_page == "100" %}selected{% endif %}>100 por página</option>
            </select>
        </div>
    </div>
    
    <div class=" overflow-x-auto ">
        <div id="spinner" class="loader htmx-indicator mb-1">   </div>
            
        <table class="p-1" style="width: 100%;">
                <tr>
                    <td class="p-1">
                        <input type="text" name="referencia" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar N. Circuito" hx-post="{% url 'lista_foe' %}" hx-target="#lista_foes" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" />
                    </td>
                    <td class="p-1">
                        <input type="text" name="encomenda" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Encomenda" hx-post="{% url 'lista_foe' %}" hx-target="#lista_foes" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" />
                    </td>
                    <td class="p-1">
                        <input type="text" name="cliente" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Cliente" hx-post="{% url 'lista_foe' %}" hx-target="#lista_foes" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" />
                    </td>
                    <td class="p-1">
                        <input type="text" name="estado" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Estado" hx-post="{% url 'lista_foe' %}" hx-target="#lista_foes" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" />
                    </td>
                    <td class="p-1">
                        <input type="text" name="tipo_ocupa" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Tipo Ocupação" hx-post="{% url 'lista_foe' %}" hx-target="#lista_foes" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" />
                    </td>
                    <td class="p-1">
                        <input type="text" name="data_obj" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Data Objectivo" hx-post="{% url 'lista_foe' %}" hx-target="#lista_foes" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" />
                    </td>
                    <td class="p-1">
                        <input type="text" name="data_entrega" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Data Entrega" hx-post="{% url 'lista_foe' %}" hx-target="#lista_foes" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" />
                    </th>
                    <td class="p-1">
                        <input type="text" name="dist_km" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Distância Km" hx-post="{% url 'lista_foe' %}" hx-target="#lista_foes" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" />
                    </td>                  
                    <td class="p-1">
                        <input type="text" name="dist_optica" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Distância Ótica" hx-post="{% url 'lista_foe' %}" hx-target="#lista_foes" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" />
                    </td>                   
                    <td class="p-1">
                        <input type="text" name="local_a" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Local A" hx-post="{% url 'lista_foe' %}" hx-target="#lista_foes" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" />
                    </td>
                    <td class="p-1">
                        <input type="text" name="local_b" class="text-xs w-full border-ipt-main rounded-sm" placeholder="Pesquisar Local B" hx-post="{% url 'lista_foe' %}" hx-target="#lista_foes" hx-swap="innerHTML" hx-trigger="keyup changed delay:500ms" hx-indicator="#spinner" />
                    </td>                      
                </tr>
            </table>
            
            {% include 'partials/tabela_foe.html' %}
   
    </div>
    <div class="mt-3 flex justify-center space-x-2">
  
</div>

 




</form>

        

<script src="{% static 'js/jquery.min.js'%}"></script>






{% endblock %}